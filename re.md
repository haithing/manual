# 正则表达式

## _Regular Expressions_

### 基础知识

**常用元字符**

| 表达式 | 等效表达式       | 说明       |
| ------ | ---------------- | ---------- |
| `.`    | `[^\r\n]`        | 非换行符   |
| `\d`   | `[0-9]`          | 数字字符   |
| `\D`   | `[^0-9]`         | 非数字字符 |
| `\w`   | `[A-Za-z0-9_]`   | 字类字符   |
| `\W`   | `[^A-Za-z0-9_]`  | 非字类字符 |
| `\s`   | `[ \t\n\v\f\r]`  | 空白字符   |
| `\S`   | `[^ \t\n\v\f\r]` | 非空白字符 |
| `\t`   | `\x09`           | 制表符     |
| `\n`   | `\x0a`           | 换行符     |
| `\v`   | `\x0b`           | 垂直制表符 |
| `\f`   | `\x0c`           | 换页符     |
| `\r`   | `\x0d`           | 回车符     |

**量词**

| 表达式   | 说明                                   |
| -------- | -------------------------------------- |
| `*`      | 匹配任意次。等效于 `{0,}`。            |
| `+`      | 匹配一次或更多次。等效于 `{1,}`。      |
| `?`      | 匹配零次或一次。等效于 `{0,1}`。       |
| `{n}`    | 匹配 `n` 次。                          |
| `{n,}`   | 匹配 `n` 次或更多次。                  |
| `{n,m}`  | 匹配 `n` 次到 `m` 次。                 |
| `*?`     | 匹配任意次，但尽可能少匹配。           |
| `+?`     | 匹配一次或更多次，但尽可能少匹配。     |
| `??`     | 匹配零次或一次，但尽可能少匹配。       |
| `{n,}?`  | 匹配 `n` 次或更多次，但尽可能少匹配。  |
| `{n,m}?` | 匹配 `n` 次到 `m` 次，但尽可能少匹配。 |

**定位符**

| 表达式 | 说明         |
| ------ | ------------ |
| `^`    | 开始位置。   |
| `$`    | 结尾位置。   |
| `\b`   | 单词边界。   |
| `\B`   | 非单词边界。 |

**其它**

| 表达式   | 说明                                         |
| -------- | -------------------------------------------- |
| `m|n`    | 分枝条件。将从左到右地测试每个条件。         |
| `[xyz]`  | 字符集。匹配包含的任何字符。                 |
| `[^xyz]` | 反向字符集。匹配不包含的任何字符。           |
| `[a-z]`  | 字符范围。匹配指定范围内的任何字符。         |
| `[^a-z]` | 反向字符范围。匹配不在指定的范围内的任何字符 |

**捕获与断言**

| 表达式     | 说明                    | 名称                         |
| ---------- | ----------------------- | ---------------------------- |
| `(exp)`    | 匹配 `exp` 并捕获该匹配 | 捕获                         |
| `(?:exp)`  | 匹配 `exp` 但不捕获匹配 | 不捕获                       |
| `(?=exp)`  | 匹配后面是 `exp` 的位置 | 先行断言（正向前瞻）         |
| `(?!exp)`  | 匹配后面非 `exp` 的位置 | 负向零宽先行断言（反向前瞻） |
| `(?<=exp)` | 匹配前面是 `exp` 的位置 | 后发断言（正向后顾）         |
| `(?<!exp)` | 匹配前面非 `exp` 的位置 | 负向零宽后发断言（反向后顾） |

```javascript
'100,000,000'.match(/\d+(?=,)/g); // ["100", "000"]
'100,000,000'.match(/\d+(?!,)/g); // ["10", "00", "000"]
'$100 bill'.match(/(?<=\$)\d+/g); // ["100"]
'¥100 yuan'.match(/(?<!\$)\d+/g); // ["100"]
```

**特殊转义字符**

| 表达式 | 说明                                                               |
| ------ | ------------------------------------------------------------------ |
| `\cx`  | 匹配由 `x` 指明的控制字符，`x` 的值必须为 `A-Z` 或 `a-z` 之一。    |
| `\xn`  | 匹配 `n`，其中 `n` 是一个用两位十六进制数字表示的 `ASCII` 字符。   |
| `\un`  | 匹配 `n`，其中 `n` 是一个用四位十六进制数字表示的 `Unicode` 字符。 |

### 在 `javascript` 中的应用

**创建**

```javascript
var re1 = /pattern/flags;
var re2 = new RegExp('pattern', 'flags');
var res = re1.test(str);
var arr = re2.exec(str);
```

**修饰符**

| 修饰符 | 描述                                                   |
| ------ | ------------------------------------------------------ |
| `i`    | 执行对大小写不敏感的匹配                               |
| `g`    | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止） |
| `m`    | 执行多行匹配                                           |
| `u`    | 支持 `Unicode` 字符                                    |
| `y`    | 要求匹配必须从头部开始                                 |

**支持正则表达式的 `String` 对象的方法**

```javascript
string.search(regexp);
string.match(regexp);
string.replace(regexp, replacement);
string.split(separator, howmany);
```
